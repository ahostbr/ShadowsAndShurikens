Project Shell

Root: ShadowsAndShurikens

Core files:

ShadowsAndShurikens.uproject — main UE project (EngineAssociation: 5.7).

ShadowsAndShurikens.sln — VS solution (generated by GenerateProjectFiles.bat).

Key folders:

Source/ — main game module (ShadowsAndShurikens + editor target).

Plugins/ — SOTS_* plugins (modular systems) + 3rd-party/editor plugins.

DevTools/python/ — Python tooling for builds, plugin audits, dependency graphs, log analysis, etc.

Config/, Saved/, Binaries/, Intermediate/ — standard UE layout.

Engine references:

DevTools configs reference UE_5.7 (e.g., E:/UE_5.7p/UE_5.7/...).

.uproject bound to UE 5.7.

Build / Project generation

Build (configurable via sots_tools_config.json):

E:/UE_5.7p/UE_5.7/Engine/Build/BatchFiles/Build.bat ShadowsAndShurikensEditor Win64 Development

Generate project files:

GenerateProjectFiles.bat -project="E:/SAS/ShadowsAndShurikens/ShadowsAndShurikens.uproject" -game -engine

Recommended path: use DevTools/python/sots_tools.py hub.

Plugin Map (High-Level Roles)
Core Infrastructure

SOTS_TagManager

Role: Central gameplay tag cache + actor tag helpers (GameInstanceSubsystem).

Module: SOTS_TagManager (Runtime).

Key: USOTS_GameplayTagManagerSubsystem, SOTS_TagAccessHelpers.

Used by: Almost everything: SOTS_GAS_Plugin, SOTS_GlobalStealthManager, SOTS_AIPerception, SOTS_UI, SOTS_INV, SOTS_FX_Plugin, etc.

SOTS_ProfileShared

Role: Shared profile/snapshot types (all FSOTS_* structs).

Module: SOTS_ProfileShared.

Key structs: FSOTS_ProfileSnapshot, FSOTS_ProfileTypes, FSOTS_ItemSlotBinding.

Used by: Save/load system across the project; many plugins depend on these types.

SOTS_Stats

Role: Runtime stats storage per character.

Module: SOTS_Stats.

Key: USOTS_StatsComponent (TMap<FGameplayTag, float>-style stat storage).

Depends on: SOTS_ProfileShared.

Progression / Skills / Abilities

SOTS_SkillTree

Role: Data-driven skill trees + per-player tree component.

Module: SOTS_SkillTree.

Key: USOTS_SkillTreeComponent, USOTS_SkillTreeDefinition, USOTS_SkillTreeSubsystem.

Depends on: SOTS_TagManager, SOTS_GlobalStealthManager, SOTS_FX_Plugin, SOTS_ProfileShared.

SOTS_GAS_Plugin

Role: Custom gameplay ability/gating system (Blueprint-first wrapper over GAS principles).

Module: SOTS_GAS_Plugin.

Key: Ability registry, gating libraries, stealth integration, skill-tree gating hooks.

Depends on:
SOTS_SkillTree, SOTS_GlobalStealthManager, SOTS_FX_Plugin, SOTS_TagManager, SOTS_UI, SOTS_INV, SOTS_ProfileShared.

Stealth / AI / Missions

SOTS_GlobalStealthManager (GSM)

Role: Global stealth state: detection tiers, global alertness, flags.

Module: SOTS_GlobalStealthManager.

Key: USOTS_GlobalStealthManagerSubsystem, SOTS_PlayerStealthComponent, SOTS_AIStealthBridgeComponent.

Depends on: SOTS_TagManager, SOTS_ProfileShared.

SOTS_AIPerception

Role: UE AIPerception integration tuned for SOTS stealth rules.

Module: SOTS_AIPerception.

Key: USOTS_AIPerceptionSubsystem, USOTS_AIPerceptionComponent, SOTS_AIGuardPerceptionDataAsset.

Depends on: SOTS_TagManager, SOTS_GlobalStealthManager, SOTS_ProfileShared, SOTS_FX_Plugin, AIModule.

SOTS_MissionDirector

Role: Mission scoring + run logging + mission summaries.

Module: SOTS_MissionDirector.

Depends on: SOTS_KillExecutionManager, SOTS_FX_Plugin, SOTS_GlobalStealthManager, SOTS_TagManager, SOTS_ProfileShared.

SOTS_KillExecutionManager (KEM)

Role: Kill/execution system (contextual animations, OmniTrace-based positioning, etc.).

Module: SOTS_KillExecutionManager.

Key: KEM manager subsystem, helper actors, Blueprint libs.

Depends on: ContextualAnimation, MotionWarping, OmniTrace, SOTS_GAS_Plugin, SOTS_GlobalStealthManager, SOTS_FX_Plugin, SOTS_TagManager.

UI / HUD / Inventory / Audio

SOTS_UI

Role: HUD, notifications, waypoints.

Module: SOTS_UI.

Key: USOTS_HUDSubsystem, USOTS_NotificationSubsystem, USOTS_WaypointSubsystem.

Depends on: UMG, Slate, SOTS_TagManager (and others contextually).

SOTS_INV

Role: Inventory bridge; handles inventory<->profile serialization.

Module: SOTS_INV.

Key: UInvSP_InventoryComponent, bridge subsystem(s).

Depends on: SOTS_TagManager, SOTS_ProfileShared.

SOTS_MMSS

Role: Mission-centric music selection + crossfades.

Module: SOTS_MMSS.

Key: USOTS_MMSSSubsystem, USOTS_MissionMusicLibrary.

Depends on: SOTS_TagManager, SOTS_ProfileShared.

SOTS_FX_Plugin

Role: Global FX orchestrator (Niagara, audio, camera shakes, pooled FX).

Module: SOTS_FX_Plugin.

Key: USOTS_FXManagerSubsystem + logging helpers.

Depends on: Niagara, SOTS_TagManager, SOTS_ProfileShared, SOTS_GlobalStealthManager.

Utility / Third-party

OmniTrace

Role: Advanced trace/pattern utilities with preset DataAssets.

Module: OmniTrace.

Key: OmniTraceBlueprintLibrary, preset libraries.

Used by: KEM, other spatial systems.

BEP (Blueprint Exporter)

Role: Editor-only utility plugin for Blueprint export.

Other plugins: DismembermentSystem, DiscordMessenger, LightProbePlugin, etc. Mostly content/utility/editor features.

Central Systems & Data Flow

Global singletons (GameInstanceSubsystems):

USOTS_GameplayTagManagerSubsystem (Tag Manager)

USOTS_GlobalStealthManagerSubsystem (GSM)

USOTS_MMSSSubsystem (Music)

USOTS_MissionDirectorSubsystem (Mission scoring)

USOTS_KEM_ManagerSubsystem (Executions)

Profile subsystem (USOTS_ProfileSubsystem) in the main game module

Typical flow examples:

Ability use:

Player triggers ability → SOTS_GAS_Plugin checks gating via SkillTree + TagManager.

If allowed → ability activates, may notify GSM, MissionDirector, FX.

FX played via SOTS_FX_Plugin; mission events logged via SOTS_MissionDirector.

Stealth/detection:

AI senses via SOTS_AIPerception (sight/hearing).

GSM aggregates detection into global tiers.

GSM + TagManager update tags/flags → UI, FX, GAS, etc. react.

Saving/loading:

USOTS_ProfileSubsystem gathers state using FSOTS_* structs from SOTS_ProfileShared.

Stats (SOTS_Stats), inventory (SOTS_INV), progression (SOTS_SkillTree, SOTS_GAS_Plugin) serialize into profile snapshots.

On load, subsystems rebuild runtime state from these snapshots.

Complexity / Risk Hotspots

High fan-out dependencies:

SOTS_TagManager and SOTS_ProfileShared are global hubs. Any change here impacts multiple plugins at once.

Dense dependency bricks:

SOTS_GAS_Plugin, SOTS_SkillTree, SOTS_FX_Plugin are big, central, and interdependent.

SOTS_KillExecutionManager ↔ SOTS_MissionDirector ↔ SOTS_GlobalStealthManager form a chain.

Data evolution risk:

Old snapshots/types like SOTS_ProfileTypes_OLD_DO_NOT_USE indicate schema evolution; any future changes to FSOTS_* need versioning/migration.

Editor/runtime separation:

Some plugins have CanContainContent and/or Editor modules. Runtime vs Editor code must stay clearly separated.

Safe Workflow Recommendations

Before refactors:

Run DevTools/python/plugin_dependency_health.py → check for cycles / weird dependency chains.

Use DevTools/python/ensure_plugin_modules.py after adding/modifying modules.

When touching profile data (FSOTS_*):

Add versioning or migration logic; never bluntly change core structs without a plan.

When touching tags:

Search for tag usage across all SOTS plugins.

Update TagManager helpers if semantics change.

When working on builds:

Use sots_tools.py hub → “run configured build + analyze”.

Inspect Saved/Logs/UnrealBuildTool.log with DevTools analyzers.